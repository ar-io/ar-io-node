@startuml
skinparam backgroundColor white
skinparam componentStyle rectangle

title Chunk Retrieval Component Architecture

component "Client" as C

package "AR.IO Node" {
  component "Express Handler" as H
  component "SQLite DB" as DB
  component "Composite Source" as CS
  database "File Cache" as FC
}

cloud "External Sources" {
  component "AR.IO Peers" as P
  component "Arweave" as A
  component "S3" as S
}

C --> H: HTTP Request
H --> DB: Lookup TX
H --> CS: Get chunk
CS --> FC: Check cache
CS ..> P: Fetch
CS ..> A: Fetch
CS ..> S: Fetch

note right of CS: Configurable parallelism\n(e.g., 1-3 concurrent)

@enduml