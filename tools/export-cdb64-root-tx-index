#!/usr/bin/env bash
#
# AR.IO Gateway
# Copyright (C) 2022-2025 Permanent Data Solutions, Inc. All Rights Reserved.
#
# SPDX-License-Identifier: AGPL-3.0-or-later
#
# Export CDB64 Root TX Index Tool
#
# This tool exports a CDB64 index file to CSV format containing
# data item ID to root transaction ID mappings.
#
# Usage: ./tools/export-cdb64-root-tx-index [options]
#
# Options:
#   --input <path>    Input CDB64 file path (required)
#   --output <path>   Output CSV file path (required, use "-" for stdout)
#   --no-header       Omit CSV header row
#   --help            Show usage information

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "${SCRIPT_DIR}/.." && pwd)"

cd "${PROJECT_ROOT}"

exec node --import ./register.js tools/lib/export-cdb64-root-tx-index.ts "$@"
